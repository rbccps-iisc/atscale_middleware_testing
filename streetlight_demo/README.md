# A demo for smart streetlights.

A smart streetlight adapts to changes in ambient light and presence/absence of activity. It is turned off during the daytime and dimmed at night when no activity is detected near it, but brightens up when activity is detected in its vicinity. Each streetlight has an LED array with a controllable brightness level and a set of sensors.

##### This demo consists of simulation models for:
* individual streetlights,
* an app that monitors/controls the lights,
* an _activity injector_ module which injects activities into adjacent streetlights to model a moving vehicle or pedestrian, and
* a _fault injector_ module which injects faults into the streetlights.

##### Each streetlight is assumed to have the following sensors:
 * A sensor to measure the ambient light intensity. The measured intensity is represented as a number between 0 to 1, where 0 and 1 indicate the lowest (dark) and highest (bright) light intensities that can be measured by the sensor.
 * A sensor to measure the intensity of the light generated by streetlight's own LED array. This is also represented by a 
 number between 0 and 1.
 * An activity sensor that generates an interrupt whenever an object (such as a vehicle or a pedestrian) passes across the streetlight.

## Streetlight Behavior:
* Periodically publish sensor data to the middleware.
* Periodically check for, and respond to commands from the middleware.
* Adjust the LED light intensity according to the ambient light level:
  * When ambient light level >= 0.6 (day-time), turn OFF the light.
  * When ambient light level < 0.6, turn ON the light and set brightness level to 0.1 (dim)  
* Whenever the LED light is ON and the activity sensor detects an object:
  * Set brightness level to 1.
  * Inform the neighbouring _N_ streetlights about the activity detected.
  * Publish information about the activity detected to the middleware.

* When informed by a neighbouring streetlight about activity detected, set the brightness level to 1.
* Whenever the light is ON, but no activity is detected for a certain amount of time, 
dim the light again (set brightness to 0.1).

## App Behavior:
* Gather sensor data from streetlights and create a visualization.
* If no messages are received from a particular streetlight for a certain amount of time, it is possible that there was a fault in the streetlight, for example, because of power failure. Mark this streetlight as _possibly faulty_.
* For other kinds of faults (for example sensor failure) on the streetlight, the streetlight will publish a _failure_ message. Upon receiving such a message, mark the streetlight as faulty and send appropriate commands to the neighbouring streetlights to cover for the faulty streetlight.

## Activity Injector:
* Periodically inject values for the ambient light sensor into each of the streetlights to model the passage of the sun.
* To model a moving vehicle, inject activities into successive street lights after fixed intervals. The length of the interval is inversely proportional to the vehicle's speed.

## Fault Injector:
* Inject faults randomly into streetlights to model power outage and sensor failures.

